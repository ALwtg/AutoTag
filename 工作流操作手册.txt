AutoTag GitHub 云端自动化工作流操作手册
========================================

本工作流允许您在本地配置任务，利用 GitHub Actions 的云端资源自动完成 AI 标注、追踪和格式转换，最后下载处理结果。

第一步：Fork 项目与基础配置
----------------------------------------
1. **Fork 项目**：
   在 GitHub 项目页面右上角点击 "Fork"，将本项目复制到您自己的 GitHub 账号下。

2. **启用 Actions**：
   进入您 Fork 后的仓库页面，点击顶部的 "Actions" 标签页。
   如果看到绿色按钮提示，点击 "I understand my workflows, go ahead and enable them" 以启用工作流功能。

3. **配置 API Key**（推荐）：
   为了让云端能够调用 AI 模型，需要配置 API Key。
   - 点击仓库顶部的 **Settings** (设置)。
   - 在左侧菜单找到 **Secrets and variables** -> **Actions**。
   - 点击 **New repository secret**。
   - **Name**: 输入 `GEMINI_API_KEY`
   - **Secret**: 输入您的 API Key (以 sk- 开头)。
   - 点击 Add secret 保存。

第二步：生成任务包
----------------------------------------
1. **本地配置**：
   在本地浏览器打开 `index.html` 运行 AutoTag。

2. **准备数据**：
   - 上传您需要处理的图片或视频文件。
   - 在左侧边栏选择模型（如 Gemini 2.0 Flash）、输入 Prompt（提示词）。
   - 调整其他参数（如并发数、FPS 等）。

3. **导出工作流包**：
   - 点击右上角的任务菜单图标（三横线）。
   - 点击 **“导出 GitHub 工作流包 (.zip)”**。
   - 在弹出的窗口中，**勾选**您希望云端处理完成后导出的结果格式：
     * **图片模式支持**：原图、带框识别图、裁剪小图、透明底图、YOLO 标记文件(.txt)等。
     * **视频模式支持**：原视频、AI追踪渲染视频、视频抽帧图片、帧标记文件(.txt)等。
   - 点击 **“确认导出”**，浏览器将下载一个名为 `autotag_github_package_xxxxx.zip` 的压缩包。

第三步：上传并运行
----------------------------------------
**推荐方法：直接上传压缩包**
1. 将下载的压缩包重命名为 **`autotag_package.zip`**。
2. 将该文件直接上传到您 GitHub 仓库的**根目录**，并提交更改 (Commit changes)。
3. GitHub Actions 会自动检测到文件更新并触发运行。

**备选方法：手动触发**
如果您不想提交代码，也可以手动运行：
1. 进入仓库的 **Actions** 页面。
2. 点击左侧的 **"AutoTag Workflow"**。
3. 点击右侧的 **"Run workflow"** 按钮。
4. (可选) 如果您没有配置 Secret，可以在这里临时粘贴 API Key。
5. 点击绿色按钮开始运行。

第四步：下载结果
----------------------------------------
1. 等待工作流运行完成（通常几分钟，取决于文件数量和视频长度）。
2. 在 Actions 页面点击刚才运行的任务记录（显示为绿色对勾表示成功）。
3. 滚动到页面底部的 **Artifacts** 区域。
4. 点击 **`autotag-results`**，系统将自动下载包含所有处理结果的压缩包。

常见问题
----------------------------------------
Q: 支持同时导出多种格式吗？
A: 支持。在导出界面您可以勾选任意多个选项，云端会一次性为您生成所有选定格式的文件。

Q: 为什么上传后没有自动运行？
A: 请确保文件名为 `autotag_package.zip` 且位于根目录。如果还是不行，请检查 Actions 页面是否被禁用，或尝试手动触发 "Run workflow"。

Q: 视频处理太慢怎么办？
A: 视频处理消耗较大资源。建议在本地配置时适当降低 FPS（例如设为 1 或 2），或者先用少量短视频进行测试。
